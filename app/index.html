<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>WHEEL</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=RocknRoll+One&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="css/style.min.css">
</head>

<body>
  <!-- start content -->
  <div class="content">
    <div class="wrapper">
    
      <h1>SPIN THE WHEEL</h1>
      <div class="prize-title" id="prize-title">
        Prize 5
      </div>
      <div class="wheel-container">
        
        
        <div class="wheel">
          <div class="wheel-wrap">
            <div class="sec sec-1">
              
            </div>
            <div class="sec sec-2">
             
            </div>
            <div class="sec sec-3">
              
            </div>
            <div class="sec sec-4">
             
            </div>
            <div class="sec sec-5"></div>
          </div>
          <div class="sector sector-1">
            <span>
              Prize 1
            </span>
          </div>
          <div class="sector sector-2">
            <span>Prize 2</span>
          </div>
          <div class="sector sector-3">
            <span>
              Prize 3
            </span>
          </div>
          <div class="sector sector-4">
            <span>Prize 4</span>
          </div>
          <div class="sector sector-5"><span>Prize 5</span></div>
        </div>
      </div>
      <button id="spin" class="button">PRESS HERE</button>
    </div>
  </div>
  <!-- end content -->

  <!-- start modal -->
  <div class="prize-screen" id="prize-modal">
    <div class="modal-content">
      <h2>CONGRATULATIONS!</h2>
      <div class="confetti">üéâ</div>
      <p>You got <span id="prize-name"></span></p>
      <button id="done" class="button">DONE</button>
    </div>
  </div>
  <!-- end modal -->
</body>


<script>
// Winning option specified by a variable
var winningOption = 3; // This means that the winning option is "Prize 3"

document.getElementById("spin").addEventListener("click", function () {
  if (!this.disabled) {
    this.disabled = true;
    var totalRotations = 25; // Number of wheel rotations
    // We use the specified winning option instead of a random number
    var selectedSector = winningOption - 1;
    var sectorAngle = selectedSector * 72;
    var wheel = document.querySelector(".wheel");

    // Determine the wheel rotation angle to make the winning sector on top
    var reverseDegrees = 360 * totalRotations - (sectorAngle + 85); // Multiply by the number of rotations

    // Set initial transform value
    wheel.style.transform = "rotate(0deg)";
    //cubic-bezier(0.17, 0.67, 0.83, 0.67)
    // Apply transition property to enable animation
    wheel.style.transition = "transform 10s cubic-bezier(0.25, 0.1, 0.25, 1)";

    // Set final transform value
    setTimeout(function() {
        wheel.style.transform = "rotate(" + reverseDegrees + "deg)";
    }, 0); // –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É, –∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ—â–∞–µ–º —ç—Ç–æ –≤ –æ—á–µ—Ä–µ–¥—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π



    // Event listener to remove transition property after animation finishes
    wheel.addEventListener("transitionend", function transitionEndHandler() {
      wheel.removeEventListener("transitionend", transitionEndHandler); // Remove the event listener
      document.getElementById("spin").disabled = false;
      wheel.style.transition = "none"; // Remove temporary transition property

      // Get the text from the selected sector
      var prizeText = document.querySelector(".sector.sector-" + (selectedSector + 1)).textContent;

      // Display the result after the wheel rotation animation ends
      setTimeout(function () {
        document.getElementById("prize-name").textContent = prizeText;
      

// Output winningOption value to prize-title div


        document.getElementById("prize-modal").style.display = "block"; // Show the modal window
      }, 1000); // Duration of wheel rotation animation
      document.getElementById("prize-title").textContent = "Prize " + winningOption;
    });
  }
});

document.getElementById("done").addEventListener("click", function () {
  document.getElementById("prize-modal").style.display = "none"; // Hide the modal window
  document.getElementById("spin").disabled = false; // Enable wheel rotation
  document.querySelector(".wheel").style.transform = "none"; // Reset wheel rotation
});

</script>
</body>

</html>
